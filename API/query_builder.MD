
## Парсеры для формирования структур загружаемых данных

util_systems.api_dynamic_serializer

Обработка структуры в формате словаря, и превращение ее в оптимизированній запрос для ORM django

конечный елемент - последняя зависимость в древе
исходный елемент - модель описанная в main

## SerailizerParser
Создает оптимальный сериализатор на основе структуры

_generate_from_struct - формирование сериализатора происходит от конечного елемента в структуре к исходному елементу. 
В первую очередь движемся к самому последнему елементу в древе, после этого переключаемся на поля из поля _sources, и повторяем движение к последнему елементу.
После этого начинаем перебирать поля, формируя поля сериализатора с подходящими настройками.
После этого обрабатываем стандартные поля.
Потом формируем сериализатор и движемся к началу.

Вся логика строиться вокруг того что можно переиспользовать структуры, если мы уже их формировали. А так как в конце списка нет ссылок на другие структуры, они самые простые для сериализации, после них идут модели с парой зависимых моделей, а потом идут более "толстые" модели, которые используют простые или не очень модели как зависимые. 



## QueryParse
Создает запрос на основе структуры

_get_inner_prefetch - просматривает поле _fields на наличие полей которые имеют сериализаторы, и возвращает список моделей которые должны бить добавлены к запросу
	
_generate_from_struct - формирует структуру запроса путем итераций по структуре
в первую очередь формирует зависимые от исходной модели запросы, путем обхода сериализируемых полей основной модели и рекурсивного вызова, это позволяет в первую очередь создать схему самых дальних запросов от исходного. Проще говоря в процессе обработки мы двигаемся от последнего к первому
После того как все запросы на основе данных описанных в структуре будут готовы, нужно создать Prefetch объекты для получения их в одном запросе.

По окончанию данного процесса, нужно обработать кастомные поля, которые могут быть результатом переименования полей или расширения модели на основе выполняемых функций.
Процесс очень схож с предыдущим.

После всего этого, нужно сформировать запрос, применив к базовому запросу фильтры, сортировку, получение только нужных полей и присоединение связанных данных.


